# Web3 å­¦æ ¡æ™ºèƒ½åˆçº¦åç«¯

è¿™æ˜¯ä¸€ä¸ªåŸºäº **Truffle Framework** çš„å®Œæ•´Web3æ•™è‚²å¹³å°æ™ºèƒ½åˆçº¦ç³»ç»Ÿï¼ŒåŒ…å«YDä»£å¸ã€å¼€å‘è€…éƒ¨ç½²å¹³å°å’Œè¯¾ç¨‹ç®¡ç†åŠŸèƒ½ã€‚

## ğŸŒŸ åŠŸèƒ½ç‰¹æ€§

### YDä»£å¸ (YDToken)
- **ERC20æ ‡å‡†ä»£å¸**: ç¬¦åˆä»¥å¤ªåŠERC20æ ‡å‡†
- **æ•™å­¦å¥–åŠ±ç³»ç»Ÿ**: æ”¯æŒè¯¾ç¨‹å®Œæˆå¥–åŠ±å’Œå¹³å°éƒ¨ç½²å¥–åŠ±
- **æƒé™ç®¡ç†**: å¤šå±‚çº§æˆæƒç³»ç»Ÿï¼Œæ”¯æŒæ•™å¸ˆå’Œå¹³å°æˆæƒ
- **å®‰å…¨ç‰¹æ€§**: åŒ…å«æš‚åœã€ç‡ƒçƒ§ç­‰å®‰å…¨åŠŸèƒ½
- **ä¾›åº”é‡æ§åˆ¶**: æœ€å¤§ä¾›åº”é‡é™åˆ¶ä¸º10äº¿ä»£å¸

### å¼€å‘è€…éƒ¨ç½²å¹³å° (DeveloperDeploymentPlatform)
- **å¼€å‘è€…æ³¨å†Œ**: å¼€å‘è€…èº«ä»½éªŒè¯å’Œç®¡ç†
- **åˆçº¦éƒ¨ç½²è®°å½•**: è®°å½•æ‰€æœ‰åˆçº¦éƒ¨ç½²ä¿¡æ¯
- **è‡ªåŠ¨å¥–åŠ±åˆ†å‘**: åŸºäºGasä½¿ç”¨é‡çš„æ™ºèƒ½å¥–åŠ±è®¡ç®—
- **åˆçº¦éªŒè¯**: åˆçº¦éªŒè¯å’Œé¢å¤–å¥–åŠ±æœºåˆ¶
- **ç»Ÿè®¡åˆ†æ**: å¹³å°ä½¿ç”¨æ•°æ®å’Œå¼€å‘è€…æ’è¡Œ

### è¯¾ç¨‹ç®¡ç†ç³»ç»Ÿ (CourseManager)
- **è¯¾ç¨‹åˆ›å»º**: è®²å¸ˆå¯ä»¥åˆ›å»ºç»“æ„åŒ–è¯¾ç¨‹
- **å­¦ä¹ è¿›åº¦è·Ÿè¸ª**: å®æ—¶ç›‘æ§å­¦ç”Ÿå­¦ä¹ è¿›åº¦
- **å‰ç½®è¯¾ç¨‹ç®¡ç†**: æ”¯æŒè¯¾ç¨‹ä¾èµ–å…³ç³»
- **å¥–åŠ±æœºåˆ¶**: å®Œæˆè¯¾ç¨‹è‡ªåŠ¨è·å¾—YDä»£å¸å¥–åŠ±
- **ç« èŠ‚ç®¡ç†**: æ”¯æŒè¯¾ç¨‹ç« èŠ‚çš„å¢åˆ æ”¹æŸ¥

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 16.0.0
- npm >= 8.0.0
- Truffle Framework
- Ganache CLI (ç”¨äºæœ¬åœ°å¼€å‘)

### å®‰è£…ä¾èµ–
```bash
git clone https://github.com/juzhiqiang/web3-school-backend.git
cd web3-school-backend
npm install
```

### ç¼–è¯‘åˆçº¦
```bash
npm run compile
```

### æœ¬åœ°å¼€å‘ç¯å¢ƒ
```bash
# å¯åŠ¨Ganache (æ–°ç»ˆç«¯çª—å£)
ganache-cli --deterministic --accounts 10

# éƒ¨ç½²åˆçº¦åˆ°æœ¬åœ°ç½‘ç»œ
npm run deploy:local

# è¿è¡Œäº¤äº’è„šæœ¬
npm run interact
```

### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test

# è¿è¡Œæµ‹è¯•è¦†ç›–ç‡
npm run test:coverage

# è¿è¡Œç‰¹å®šæµ‹è¯•
truffle test test/YDToken.test.js
```

## ğŸ“ Truffle æ¡†æ¶è¯´æ˜

æœ¬é¡¹ç›®å®Œå…¨åŸºäº **Truffle Framework** æ„å»ºï¼Œè¿™æ˜¯ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦å¼€å‘çš„æˆç†Ÿæ¡†æ¶ï¼š

### Truffle ä¼˜åŠ¿
- ğŸ”§ **æˆç†Ÿç¨³å®š**: ç»è¿‡é•¿æœŸéªŒè¯çš„å¼€å‘æ¡†æ¶
- ğŸ“¦ **å®Œæ•´å·¥å…·é“¾**: ç¼–è¯‘ã€éƒ¨ç½²ã€æµ‹è¯•ä¸€ä½“åŒ–
- ğŸŒ **å¤šç½‘ç»œæ”¯æŒ**: è½»æ¾éƒ¨ç½²åˆ°å„ç§ç½‘ç»œ
- ğŸ§ª **å¼ºå¤§æµ‹è¯•**: å†…ç½®æµ‹è¯•æ¡†æ¶å’Œæ–­è¨€åº“
- ğŸ“Š **è°ƒè¯•å·¥å…·**: å†…ç½®è°ƒè¯•å™¨å’Œæ§åˆ¶å°

### é¡¹ç›®ç»“æ„
```
web3-school-backend/
â”œâ”€â”€ contracts/           # Solidityæ™ºèƒ½åˆçº¦
â”œâ”€â”€ migrations/          # Truffleéƒ¨ç½²è„šæœ¬
â”œâ”€â”€ test/               # Truffleæµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ scripts/            # è‡ªå®šä¹‰è„šæœ¬
â””â”€â”€ truffle-config.js   # Truffleé…ç½®æ–‡ä»¶
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡è®¾ç½®
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶æ·»åŠ :
INFURA_PROJECT_ID=ä½ çš„Infuraé¡¹ç›®ID
MNEMONIC=ä½ çš„é’±åŒ…åŠ©è®°è¯
ETHERSCAN_API_KEY=ä½ çš„Etherscan APIå¯†é’¥
```

### æ”¯æŒçš„ç½‘ç»œ
- **æœ¬åœ°å¼€å‘**: Ganache (localhost:8545)
- **æµ‹è¯•ç½‘**: Goerli, Sepolia
- **ä¸»ç½‘**: Ethereum Mainnet, Polygon, BSC

## ğŸ“Š ä»£å¸ç»æµæ¨¡å‹

### YDä»£å¸åˆ†é…
- **æ€»ä¾›åº”é‡**: 10äº¿ YDä»£å¸
- **åˆå§‹åˆ†é…**: 1äº¿ä»£å¸ï¼ˆå¯é…ç½®ï¼‰
- **å¥–åŠ±æ± **: 1000ä¸‡ä»£å¸ç”¨äºæ•™å­¦å¥–åŠ±
- **å¼€å‘è€…å¥–åŠ±**: æ ¹æ®è´¡çŒ®åŠ¨æ€åˆ†é…

### å¥–åŠ±æœºåˆ¶

#### è¯¾ç¨‹å®Œæˆå¥–åŠ±
- SolidityåŸºç¡€ï¼š100 YD
- Web3å¼€å‘ï¼š200 YD
- DeFiåè®®å¼€å‘ï¼š300 YD
- NFTå¼€å‘ï¼š250 YD

#### åˆçº¦éƒ¨ç½²å¥–åŠ±
- **åŸºç¡€å¥–åŠ±**: 10 YDä»£å¸
- **å¤æ‚åº¦å¥–åŠ±**: æ ¹æ®Gasä½¿ç”¨é‡è®¡ç®—
- **éªŒè¯å¥–åŠ±**: 5 YDä»£å¸ï¼ˆé¢å¤–ï¼‰

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### å¼€å‘è€…åœºæ™¯
1. **æ³¨å†Œå¼€å‘è€…è´¦æˆ·**
2. **éƒ¨ç½²æ™ºèƒ½åˆçº¦å¹¶è®°å½•**
3. **è·å¾—åŸºäºè´¡çŒ®çš„YDä»£å¸å¥–åŠ±**
4. **ç”³è¯·åˆçº¦éªŒè¯è·å¾—é¢å¤–å¥–åŠ±**

### å­¦ç”Ÿåœºæ™¯
1. **æ³¨å†Œæ„Ÿå…´è¶£çš„è¯¾ç¨‹**
2. **æŒ‰è¿›åº¦å­¦ä¹ è¯¾ç¨‹å†…å®¹**
3. **å®Œæˆè¯¾ç¨‹è·å¾—YDä»£å¸å¥–åŠ±**
4. **ä½¿ç”¨ä»£å¸è§£é”é«˜çº§è¯¾ç¨‹**

### è®²å¸ˆåœºæ™¯
1. **åˆ›å»ºç»“æ„åŒ–è¯¾ç¨‹å†…å®¹**
2. **è·Ÿè¸ªå­¦ç”Ÿå­¦ä¹ è¿›åº¦**
3. **ç®¡ç†è¯¾ç¨‹ç« èŠ‚å’Œè¦æ±‚**
4. **è·å¾—æ•™å­¦è´¡çŒ®å¥–åŠ±**

## ğŸ› ï¸ å¼€å‘å·¥å…·

### Truffle å‘½ä»¤
```bash
# ç¼–è¯‘åˆçº¦
truffle compile

# éƒ¨ç½²åˆ°æœ¬åœ°
truffle migrate --network development

# è¿›å…¥Truffleæ§åˆ¶å°
truffle console --network development

# è¿è¡Œæµ‹è¯•
truffle test

# éªŒè¯åˆçº¦
truffle run verify ContractName --network goerli
```

### è‡ªå®šä¹‰è„šæœ¬
```bash
# Gasæ¶ˆè€—ä¼°ç®—
npm run estimate-gas

# åˆçº¦å¤§å°æ£€æŸ¥
npm run size-check

# ä»£ç è´¨é‡æ£€æŸ¥
npm run lint

# æ¸…ç†æ„å»ºæ–‡ä»¶
npm run clean
```

## ğŸ“– æ–‡æ¡£èµ„æº

- **[APIæ–‡æ¡£](docs/API.md)** - æ™ºèƒ½åˆçº¦APIå‚è€ƒ
- **[éƒ¨ç½²æŒ‡å—](docs/DEPLOYMENT.md)** - è¯¦ç»†éƒ¨ç½²è¯´æ˜
- **[å®‰å…¨æŒ‡å—](docs/SECURITY.md)** - å®‰å…¨æœ€ä½³å®è·µ
- **[å‰ç«¯é›†æˆ](docs/FRONTEND_INTEGRATION.md)** - Web3.jsé›†æˆç¤ºä¾‹
- **[ä½¿ç”¨ç¤ºä¾‹](docs/EXAMPLES.md)** - å®Œæ•´ä½¿ç”¨æ¡ˆä¾‹
- **[TruffleæŒ‡å—](docs/TRUFFLE_GUIDE.md)** - Truffleæ¡†æ¶è¯¦è§£

## ğŸ” å®‰å…¨ç‰¹æ€§

- âœ… åŸºäºOpenZeppelinçš„å®‰å…¨åˆçº¦åº“
- âœ… é‡å…¥æ”»å‡»é˜²æŠ¤ (ReentrancyGuard)
- âœ… è®¿é—®æ§åˆ¶ (Ownable, è‡ªå®šä¹‰æƒé™)
- âœ… æ•´æ•°æº¢å‡ºä¿æŠ¤ (Solidity 0.8+)
- âœ… ç´§æ€¥æš‚åœæœºåˆ¶ (Pausable)
- âœ… å®Œæ•´çš„äº‹ä»¶æ—¥å¿—è®°å½•

## ğŸ§ª æµ‹è¯•è¦†ç›–

### æµ‹è¯•ç»„ä»¶
- **YDToken**: ä»£å¸åŸºç¡€åŠŸèƒ½ã€æƒé™ç®¡ç†ã€å¥–åŠ±åˆ†å‘
- **DeveloperDeploymentPlatform**: å¼€å‘è€…æ³¨å†Œã€éƒ¨ç½²è®°å½•ã€å¥–åŠ±è®¡ç®—
- **CourseManager**: è¯¾ç¨‹ç®¡ç†ã€å­¦ç”Ÿæ³¨å†Œã€è¿›åº¦è·Ÿè¸ª

### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test

# è¿è¡Œè¦†ç›–ç‡æµ‹è¯•
npm run test:coverage

# è¿è¡Œç‰¹å®šåˆçº¦æµ‹è¯•
truffle test test/YDToken.test.js
truffle test test/DeveloperDeploymentPlatform.test.js
truffle test test/CourseManager.test.js
```

## ğŸŒ ç½‘ç»œéƒ¨ç½²

### æœ¬åœ°å¼€å‘
```bash
# å¯åŠ¨Ganache
ganache-cli --deterministic --accounts 10

# éƒ¨ç½²åˆ°æœ¬åœ°ç½‘ç»œ
npm run deploy:local
```

### æµ‹è¯•ç½‘éƒ¨ç½²
```bash
# éƒ¨ç½²åˆ°Goerliæµ‹è¯•ç½‘
npm run deploy

# éƒ¨ç½²åˆ°Sepoliaæµ‹è¯•ç½‘
npm run deploy:sepolia

# éªŒè¯åˆçº¦
npm run verify
```

## ğŸ“ˆ ç›‘æ§å’Œåˆ†æ

### å¹³å°ç»Ÿè®¡
- æ€»éƒ¨ç½²æ•°é‡
- æ³¨å†Œå¼€å‘è€…æ•°é‡
- å·²åˆ†å‘å¥–åŠ±æ€»é¢
- åˆçº¦ä½™é¢çŠ¶æ€

### å­¦ä¹ æ•°æ®
- è¯¾ç¨‹æ³¨å†Œäººæ•°
- å®Œæˆç‡ç»Ÿè®¡
- å¥–åŠ±åˆ†å‘è®°å½•
- å­¦ä¹ è¿›åº¦åˆ†æ

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿å‚ä¸é¡¹ç›®è´¡çŒ®ï¼è¯·æŸ¥çœ‹ [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚

### å¼€å‘æµç¨‹
1. Fork é¡¹ç›®åˆ°æ‚¨çš„GitHubè´¦æˆ·
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä½¿ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸš€ å¿«é€Ÿå¯åŠ¨å‘½ä»¤

```bash
# å®Œæ•´çš„æœ¬åœ°å¼€å‘ç¯å¢ƒè®¾ç½®
git clone https://github.com/juzhiqiang/web3-school-backend.git
cd web3-school-backend
npm install
ganache-cli --deterministic --accounts 10 &
npm run deploy:local
npm run test
npm run interact
```

---

**Web3å­¦æ ¡** - è®©åŒºå—é“¾æ•™è‚²æ›´ç®€å•ã€æ›´æœ‰è¶£ï¼ğŸ“âœ¨

*åŸºäº Truffle Framework æ„å»ºï¼Œæä¾›ç¨³å®šå¯é çš„æ™ºèƒ½åˆçº¦å¼€å‘ä½“éªŒ*
